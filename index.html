<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sistem Rolling Tempat Duduk 4x4 (32 siswa)</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --gap: 12px;
      --desk-w: 140px;
      --seat-h: 36px;
      --primary: #0b74de;
      --primary-dark: #065ea6;
      --bg-light: #f4f8ff;
    }
    body {
      font-family: 'Poppins', sans-serif;
      margin: 18px;
      color: #111;
      background: var(--bg-light);
    }
    h1 {
      font-size: 22px;
      margin: 0 0 10px;
      color: var(--primary-dark);
    }
    .controls {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 12px;
    }
    textarea {
      width: 100%;
      height: 110px;
      padding: 8px;
      font-family: monospace;
      border-radius: 8px;
      border: 1px solid #ccc;
      outline: none;
      transition: all 0.2s ease;
    }
    textarea:focus {
      border-color: var(--primary);
      box-shadow: 0 0 4px rgba(11, 116, 222, 0.5);
    }
    .wrap {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
    }
    .left {
      flex: 1;
      min-width: 320px;
      background: white;
      padding: 16px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    .right {
      flex: 2;
      min-width: 320px;
      background: white;
      padding: 16px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: var(--gap);
      margin-top: 10px;
    }
    .desk {
      background: linear-gradient(135deg, #ffffff, #f9fbff);
      border-radius: 12px;
      padding: 8px;
      display: flex;
      flex-direction: column;
      align-items: center;
      box-shadow: 0 3px 8px rgba(0,0,0,0.05);
      transition: transform 0.2s ease;
    }
    .desk:hover {
      transform: translateY(-3px);
    }
    .desk .label {
      font-weight: 600;
      margin-bottom: 6px;
      color: var(--primary-dark);
    }
    .seats {
      display: flex;
      gap: 8px;
    }
    .seat {
      width: calc(var(--desk-w)/2 - 10px);
      min-width: 100px;
      height: var(--seat-h);
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 6px;
      background: #e8f3ff;
      border: 1px solid #cfe6ff;
      padding: 6px;
      font-size: 13px;
      font-weight: 500;
    }
    .footer {
      margin-top: 12px;
      display: flex;
      gap: 8px;
      align-items: center;
    }
    button {
      padding: 8px 12px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      font-weight: 500;
      background: #eee;
      transition: background 0.2s ease, transform 0.1s ease;
    }
    button:hover {
      background: #ddd;
      transform: scale(1.03);
    }
    button.primary {
      background: var(--primary);
      color: #fff;
    }
    button.primary:hover {
      background: var(--primary-dark);
    }
    .meta {
      margin-bottom: 10px;
      color: #444;
    }
    .week-indicator {
      font-weight: 700;
      color: var(--primary-dark);
    }
    .note {
      font-size: 12px;
      color: #666;
      margin-top: 8px;
    }
    @media (max-width: 900px) {
      .wrap { flex-direction: column; }
    }
  </style>
</head>
<body>
  <h1>Sistem Rolling Tempat Duduk — Kelas 4×4 (32 siswa)</h1>
  <p class="meta">Masukkan daftar 32 nama (satu per baris). Jika kosong, akan diisi otomatis (1..32).</p>
  
  <div class="wrap">
    <div class="left">
      <label for="names">Daftar nama (max 32, satu per baris):</label>
      <textarea id="names" placeholder="Masukkan 32 nama..."></textarea>
      <div class="controls">
        <button id="fillDefault">Isi default 1..32</button>
        <button id="randomize">Acak nama</button>
        <button id="apply" class="primary">Buat Jadwal Rolling</button>
      </div>
      <div class="note">
        Algoritma sederhana: setiap minggu meja bergeser dan pasangan bisa berganti dengan menukar kursi dalam meja pada minggu ganjil.
      </div>
    </div>

    <div class="right">
      <div>
        <span class="week-indicator">Minggu 1</span>
      </div>
      <div class="grid" id="classGrid" aria-live="polite"></div>
      <div class="footer">
        <div class="small">Keterangan: tiap kotak meja menampilkan dua nama (kursi kiri & kanan).</div>
      </div>
    </div>
  </div>

  <script>
(function(){
  const TOTAL_STUDENTS = 32;
  const DESKS = 16; 
  const ROWS = 4, COLS = 4;

  const namesArea = document.getElementById('names');
  const fillDefaultBtn = document.getElementById('fillDefault');
  const randomizeBtn = document.getElementById('randomize');
  const applyBtn = document.getElementById('apply');
  const grid = document.getElementById('classGrid');

  function defaultNames(){
    const arr=[]; for(let i=1;i<=TOTAL_STUDENTS;i++) arr.push('Siswa '+i);
    return arr;
  }
  function readNames(){
    const raw = namesArea.value.split('\n').map(s=>s.trim()).filter(s=>s.length>0);
    if(raw.length===0) return defaultNames();
    const arr = raw.slice(0,TOTAL_STUDENTS);
    while(arr.length<TOTAL_STUDENTS) arr.push('Siswa '+(arr.length+1));
    return arr;
  }
  function shuffle(a){
    for(let i=a.length-1;i>0;i--){
      const j=Math.floor(Math.random()*(i+1));
      [a[i],a[j]]=[a[j],a[i]];
    }
  }
  function buildInitialAssignments(studentsArr){
    const assign = new Array(DESKS);
    for(let d=0;d<DESKS;d++){
      assign[d]=[studentsArr[2*d], studentsArr[2*d+1]];
    }
    return assign;
  }
  function computeSchedule(initialAssign){
    const shift = 0; // minggu pertama saja
    const swapFlag = false;
    const weekAssign = new Array(DESKS);
    for(let d=0; d<DESKS; d++){
      const sourceDesk = (d - shift + DESKS) % DESKS;
      const pair = initialAssign[sourceDesk].slice();
      if(swapFlag) pair.reverse();
      weekAssign[d] = pair;
    }
    return weekAssign;
  }
  function renderWeek(assign){
    grid.innerHTML='';
    for(let r=0;r<ROWS;r++){
      for(let c=0;c<COLS;c++){
        const deskIndex = r*COLS + c;
        const pair = assign[deskIndex];
        const deskEl = document.createElement('div'); deskEl.className='desk';
        const label = document.createElement('div'); label.className='label'; label.textContent='Meja '+(deskIndex+1);
        const seats = document.createElement('div'); seats.className='seats';
        const left = document.createElement('div'); left.className='seat'; left.textContent=pair[0] || '-';
        const right = document.createElement('div'); right.className='seat'; right.textContent=pair[1] || '-';
        seats.appendChild(left); seats.appendChild(right);
        deskEl.appendChild(label); deskEl.appendChild(seats);
        grid.appendChild(deskEl);
      }
    }
  }
  function generate(){
    const students = readNames();
    const initial = buildInitialAssignments(students);
    const week1 = computeSchedule(initial);
    renderWeek(week1);
  }

  fillDefaultBtn.addEventListener('click', ()=>{
    namesArea.value = defaultNames().join('\n');
  });
  randomizeBtn.addEventListener('click', ()=>{
    const arr = readNames(); shuffle(arr); namesArea.value = arr.join('\n');
  });
  applyBtn.addEventListener('click', ()=>{ generate(); });

  namesArea.value = defaultNames().join('\n');
  generate();
})();
  </script>
</body>
</html>